<Window x:Class="RCOM.SampleApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RCOM Sample App" Width="800" Height="700"
        Closing="Window_Closing">
    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 接続設定 -->
        <GroupBox Grid.Row="0" Header="接続設定" Padding="4" Margin="0,0,0,4">
            <StackPanel>
                <!-- トランスポート選択 -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="トランスポート:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                    <RadioButton x:Name="RbGrpc" Content="gRPC" IsChecked="True" Margin="0,0,12,0"
                                 Checked="RbTransport_Checked"/>
                    <RadioButton x:Name="RbIpc" Content="IPC (名前付きパイプ)"
                                 Checked="RbTransport_Checked"/>
                </StackPanel>

                <!-- gRPC 設定 -->
                <Grid x:Name="PnlGrpc">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="URL:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                    <TextBox Grid.Column="1" x:Name="TxtUrl" Text="localhost:5000" Margin="0,0,8,0"/>
                    <TextBlock Grid.Column="2" Text="Key:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                    <TextBox Grid.Column="3" x:Name="TxtMatchingKey" Text="" Margin="0,0,8,0"/>
                    <CheckBox Grid.Column="4" x:Name="ChkTls" Content="TLS" VerticalAlignment="Center"/>
                </Grid>

                <!-- IPC 設定 -->
                <Grid x:Name="PnlIpc" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="パイプ名:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                    <TextBox Grid.Column="1" x:Name="TxtPipeName" Text="rcom-test" Margin="0,0,8,0"/>
                </Grid>

                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                    <Button x:Name="BtnConnect" Content="接続" Width="60" Click="BtnConnect_Click" Margin="0,0,4,0"/>
                    <Button x:Name="BtnDisconnect" Content="切断" Width="60" Click="BtnDisconnect_Click" IsEnabled="False" Margin="0,0,8,0"/>
                    <TextBlock x:Name="TxtStatus" Text="未接続" VerticalAlignment="Center" FontWeight="Bold"/>
                </StackPanel>
            </StackPanel>
        </GroupBox>

        <!-- CallAsync / OnRequest -->
        <Grid Grid.Row="1" Margin="0,0,0,4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- CallAsync 送信 -->
            <GroupBox Grid.Column="0" Header="CallAsync 送信" Padding="4" Margin="0,0,4,0">
                <StackPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="メソッド:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBox Grid.Column="1" x:Name="TxtCallMethod"/>
                    </Grid>
                    <TextBlock Text="パラメータ (JSON):" Margin="0,4,0,2"/>
                    <TextBox x:Name="TxtCallParams" Height="40" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                    <Button x:Name="BtnCall" Content="送信" Width="60" HorizontalAlignment="Left" Click="BtnCall_Click" IsEnabled="False" Margin="0,4,0,0"/>
                    <TextBlock Text="応答:" Margin="0,4,0,0"/>
                    <TextBox x:Name="TxtCallResult" IsReadOnly="True" Height="40" VerticalScrollBarVisibility="Auto" Background="#F0F0F0"/>
                    <TextBlock x:Name="TxtCallElapsed" Text="所要時間: --- ms" Margin="0,2,0,0"/>
                </StackPanel>
            </GroupBox>

            <!-- OnRequest 待機設定 -->
            <GroupBox Grid.Column="1" Header="OnRequest 待機設定" Padding="4" Margin="4,0,0,0">
                <StackPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="待機メソッド:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBox Grid.Column="1" x:Name="TxtWaitMethod"/>
                    </Grid>
                    <TextBlock Text="レスポンス種別:" Margin="0,4,0,2"/>
                    <StackPanel Orientation="Horizontal">
                        <RadioButton x:Name="RbSuccess" Content="Success" IsChecked="True" Margin="0,0,12,0"/>
                        <RadioButton x:Name="RbError" Content="Error"/>
                    </StackPanel>
                    <TextBlock Text="メッセージ:" Margin="0,4,0,2"/>
                    <TextBox x:Name="TxtResponseMessage" Height="40" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                </StackPanel>
            </GroupBox>
        </Grid>

        <!-- NotifyAsync / OnNotify -->
        <Grid Grid.Row="2" Margin="0,0,0,4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- NotifyAsync 送信 -->
            <GroupBox Grid.Column="0" Header="NotifyAsync 送信" Padding="4" Margin="0,0,4,0">
                <StackPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="メソッド:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBox Grid.Column="1" x:Name="TxtNotifyMethod"/>
                    </Grid>
                    <TextBlock Text="パラメータ (JSON):" Margin="0,4,0,2"/>
                    <TextBox x:Name="TxtNotifyParams" Height="40" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                    <Button x:Name="BtnNotify" Content="送信" Width="60" HorizontalAlignment="Left" Click="BtnNotify_Click" IsEnabled="False" Margin="0,4,0,0"/>
                </StackPanel>
            </GroupBox>

            <!-- OnNotify 受信 -->
            <GroupBox Grid.Column="1" Header="OnNotify 受信" Padding="4" Margin="4,0,0,0">
                <ListBox x:Name="LstNotifyReceived" Height="110"/>
            </GroupBox>
        </Grid>

        <!-- ログ -->
        <GroupBox Grid.Row="3" Header="ログ" Padding="4">
            <ListBox x:Name="LstLog" FontFamily="Consolas" FontSize="11"/>
        </GroupBox>
    </Grid>
</Window>
